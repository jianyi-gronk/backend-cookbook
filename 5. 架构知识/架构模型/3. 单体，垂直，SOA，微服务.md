## 1. 单体架构

- 单体架构，就是将所有的功能集中在一个工程中
  ![image](https://github.com/user-attachments/assets/6de20150-4116-4fd1-a434-1abf8cb9aae9)
- 对于小型项目来讲，单体架构有着得天独厚的优势，开发、部署都很简单，成本低、周期短、效率高，即使在微服务架构流行的今日，单体架构仍非常适合小型项目
- 但随着业务功能的不断增加，单体架构的工程会愈发的庞大、臃肿，对开发、运维等各类工作均会带来不小的负面影响
  - 工程大了，文件多了，那么若没有强力的开发规范及约束手段，工程就难免混乱
  - 工程编译及启动需要更长的时间，工作电脑配置不足时，甚至会出现 IDE 使用卡顿的情况
  - 在生产环境下对工程进行上线（ 尤其是长久没有更新过的情况下 ）风险难以估量
- 单体架构作为一个整体，相较于 SOA 架构、微服务架构这种拆分的架构，还有 3 个明显的缺点
  - 高性能性：单体受硬件限制，存在性能上限
  - 高可用性：单体架构存在着因为一个 bug 而拖死整个系统的风险
  - 可扩展性：单体架构无法针对某一类高峰业务进行硬件扩展，只能作为整体进行扩展

## 2. 垂直架构

- 垂直架构，其实就是根据业务特性将原有的单体架构项目拆分成多个项目。业务拆分的原则应该满足可以独立运行、相互间不影响
  ![image](https://github.com/user-attachments/assets/e15eae34-21a2-4c8e-9e02-2e71b86e6912)
- 垂直架构所拆分出的项目在体量上有所缩减，不过本质上依然是单体架构，具有单体架构固有的优缺点
- 垂直架构控制了工程体量，将原有系统的流量分散到多个子系统中，可以对子系统进行单独扩展。同时，垂直架构也带来了新的问题
  - 部分功能的重叠，也就是常说的 “重复造轮子”
  - 数据冗余，比如任何一个系统都需要用户信息，这些数据往往又需要同步，多以数据库层面的同步手段为主，比如 Oracle 的 DataGuard，有时甚至可以直接通过 DBLink、Synonym、View 等方式粗暴的解决，当然也有通过系统间的接口进行同步处理的
  - 愈发避无可避的系统间交互（ 信息孤岛的打破 ），一个系统需要集成、对接多个不同系统的接口
- 从理论上的架构角度去看，垂直架构是因为单体架构过于庞大进而拆分而来。有意思的是，实际中会存在这样的场景，从商业项目的角度出发，一个大型系统在投标之际就已经被规划为多个子系统，这些子系统由不同厂商中标，自然而然的形成了垂直架构的模型

## 3. SOA 架构（ Service-Oriented Architecture ）

#### 3.1 SOA

- SOA 即面向服务的架构，提出背景是企业各部门有独立的 IT 部门，且随着业务发展，复杂度越来越高，导致企业内部的 IT 系统重复建设且效率低下
- SOA 将应用程序的不同功能单元（ 称为服务 ）进行拆分，并通过这些服务之间定义良好的接口和协议联系起来。接口是采用中立的方式进行定义的，它应该独立于实现服务的硬件平台、操作系统和编程语言。这使得构建在各种各样的系统中的服务可以以一种统一和通用的方式进行交互
- 同样都是对系统进行拆分，SOA 在垂直架构的基础上，抽离出重叠的功能作为公共的服务，来解决重复造轮子的问题。拆分出的系统或服务，**通过 ESB（ Enterprise Service Bus ）企业服务总线来进行规范的、统一的信息交互**，解决调用混乱的问题
  ![image](https://github.com/user-attachments/assets/4246a006-3481-4587-896f-31ca47cd2e78)
- SOA 相较于垂直架构，对于业务的拆分更为清晰，公共的组件服务职责单一，可扩展性强。不再强行打通数据库层面的壁障，让数据重新回到隔离状态，信息孤岛问题全部由接口来解决，提高了系统的安全性。ESB 将原先的点对点交互模式转换为了总线式集成的交互模式，降低了系统间的耦合度，同时也降低了系统间相互集成的难度与成本
- SOA 架构是传统公司偏好使用的一种方案，目的是把本来集团内部独立的各种服务通过 ESB 串联起来，让服务之间的通讯更加方便，能够兼容各种异构的单体服务

#### 3.2 SOA 的缺点

- SOA 将服务的抽取解决了重复造轮子的事情，但轮子的抽取，会使得系统与服务之间高度耦合
- ESB 是 SOA 架构的核心，让各种异构的应用可以不用关注各种细节，只需要关注实现自己的功能，但是也存在很多问题
  - 因为 ESB 要兼容各种异构应用，导致 ESB 会越来越复杂，臃肿，难以维护
  - 系统间通过 ESB 进行中转交互，性能一定会有所损耗
  - 且所有系统间的信息都通过 ESB 来传递，ESB 很明显的会成为整个系统内的瓶颈所在，一旦 ESB 宕了，所有系统都会受到牵连

## 4. 微服务架构

- 微服务架构在互联网已经相当成熟的时代，互联网业务量剧增，变化又十分频繁，互联网技术团队对敏捷开发、持续交付、系统弹性扩展、资源利用优化等课题十分关注，微服务架构在这样的条件中，取得了良好的实践效果
- 微服务架构将单一的应用程序拆分为一组小型服务，每个服务都是围绕业务能力进行构建，能够独立开发、测试、部署，服务间采用轻量级的通讯机制
  ![image](https://github.com/user-attachments/assets/c037429f-632a-4308-bcb6-0c5c4ede551f)
- 抛开 ESB，是微服务架构与 SOA 有些相似，可以将微服务看做是 SOA 的子集，微服务可以说是粒度更细、更能满足当前互联网需求的 SOA 的实现方式。更细的拆分粒度有利于资源的重复利用与精准的伸缩扩容，服务间的通信协议更加轻量，对于 DevOps 有着更好的支持
- 相较于 SOA，微服务之所以能够成功，不仅仅是因为架构本身能够匹配业务痛点，更是因为整个互联网环境及配套工具链（ 如云、容器等 ）的成熟，才使得微服务架构有了最佳实践
- 但是微服务架构也带来了复杂性，微服务架构具有分布式架构固有的复杂性
  - 如服务间需要相互通信、可能产生的分布式事务问题等，服务调用关系复杂，使得问题排查与定位的难度也大大增加
  - 一套微服务应用的部署与运维相当麻烦，首先需要缓存、消息、反向代理、监控平台、注册中心等等中间件的支持，接下来是大量应用实例的规划与部署，同时产生大量的配置信息需要去管理，成熟的部署运维需要寻求高度自动化的方案
