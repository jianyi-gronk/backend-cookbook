## 1. 配置中心

#### 1.1 基础介绍

- 对于传统的单体应用而言，常使用配置文件来管理所有配置，比如 SpringBoot 的 application.yml 文件，但是在微服务架构中全部手动修改的话很麻烦而且不易维护。微服务的配置管理一般有以下需求：
  - 集中配置管理。一个微服务架构中可能有成百上千个微服务，所以集中配置管理是很重要的
  - 不同环境不同配置。比如数据源配置在不同环境（ 开发，生产，测试 ）中是不同的
  - 运行期间可动态调整。例如，可根据各个微服务的负载情况，动态调整数据源连接池大小等
  - 配置修改后可自动更新。如配置内容发生变化，微服务可以自动更新配置
- 综上所述对于微服务架构而言，一套统一的，通用的管理配置机制是不可缺少的主要组成部分。常见的做法就是通过配置服务器进行管理

#### 1.2 其他框架比较

- 为了实现各种不同的业务需求，市面上已经有很多很可靠的配置中心可用了，每个配置中心都有自己的实现
  ![image](https://github.com/user-attachments/assets/66f4d0f9-5258-405a-bf33-2238dc7b84f8)

#### 1.3 部署架构

- 配置中心与其他两大中心不同，它无关于接口级还是应用级，它与接口并没有对应关系，它仅仅与配置数据有关，即使没有部署注册中心和元数据中心，配置中心也能直接被接入到 Dubbo 应用服务中
- 在整个部署架构中，整个集群内的实例（ 无论是 Provider 还是 Consumer ）都将会共享该配置中心集群中的配置，如下图所示：
  ![image](https://github.com/user-attachments/assets/8251ef66-19e3-4db1-ba89-60c7f4e3ed99)
  - 该图中不配备注册中心，意味着可能采用了 Dubbo mesh 的方案，也可能不需要进行服务注册，仅仅接收直连模式的服务调用
  - 该图中不配备元数据中心，意味着 Consumer 可以从 Provider 暴露的 MetadataService 获取服务元数据，从而实现 RPC 调用

## 2. 核心概念

- 集中化存储和管理：
  - 配置中心提供一个集中化的存储库，用于存储应用程序的各种配置数据。这些数据可以包括环境设置、数据库连接信息、日志级别、缓存配置等
  - 通过将配置数据集中管理，可以避免将配置散布在不同的地方，提高配置的可维护性和一致性
- 动态配置更新：
  - 配置中心允许在应用程序运行时动态更新配置，而无需重新启动应用程序或重新部署。这意味着可以实时地修改配置，从而快速适应变化的需求
  - 例如，在配置中心中增加一个新的环境变量或修改数据库连接信息，应用程序可以立即获取到最新的配置，而无需重启
- 版本管理和回滚：
  - 配置中心通常支持配置的版本管理，可以跟踪和记录每次配置变更的历史。这样可以轻松回溯到之前的配置状态，快速进行配置的回滚操作
  - 版本管理还可以帮助审计和跟踪配置更改的来源和原因
- 访问控制和权限管理：
  - 配置中心提供对配置数据的访问控制和权限管理，确保只有授权的人员能够查看和修改配置。这样可以防止配置被误操作或滥用，并提高配置数据的安全性
- 通知和自动化部署：
  - 配置中心通常支持通知机制，当配置发生变化时，可以通过通知方式将变更信息发送给相关人员
  - 此外，一些配置中心还支持与自动化部署工具的集成，使得配置的变更可以自动部署到相应的环境中
- 环境和应用程序的隔离：
  - 配置中心通常支持根据不同的环境（如开发、测试、生产）和应用程序进行配置的隔离。这意味着可以为每个环境和应用程序定义特定的配置集合，以满足不同环境和应用程序的需求
- 监控和诊断：
  - 配置中心通常提供一些监控和诊断工具，用于检测配置的健康状态、配置变更的影响和配置的使用情况。这对于及时发现和解决配置相关的问题非常重要

## 3. 常用配置项

- 可配置项如下，对应类型为 ConfigCenterConfig
  ![image](https://github.com/user-attachments/assets/568c4422-9553-4708-a8ef-5a639ade3f07)
