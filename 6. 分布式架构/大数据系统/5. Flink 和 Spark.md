## 1. Flink

#### 1.1 核心理念

- **主要专注于流处理，将批处理当作是特殊的流处理**
- Flink 的核心设计理念是基于流处理。Flink 认为所有的数据处理任务都可以通过处理数据流来实现，无论这些数据是实时生成的（ 无界流 ），还是预先存储的（ 有界流 ），在 Flink 视角中，批处理简单地被视为处理有界数据的特例
- 这种方法使得 Flink 在设计上能够天然地实现高吞吐量和低延迟的数据处理，同时也支持事件时间（ Event Time ）和精确一次性（ Exactly-Once ）的状态处理语义，这对于复杂的流处理非常重要

#### 1.2 无界 和 有界

- 任何类型的数据都可以形成一种事件流。信用卡交易、传感器测量、机器日志、网站或移动应用程序上的用户交互记录，所有这些数据都形成一种流
- 数据可以被作为 无界 或者 有界 流来处理
- 无界流
  - 有定义流的开始，但没有定义流的结束，它们会无休止地产生数据
  - 无界流的数据必须持续处理，即数据被摄取后需要立刻处理。我们不能等到所有数据都到达再处理，因为输入是无限的，在任何时候输入都不会完成
  - 处理无界数据通常要求以特定顺序摄取事件，例如事件发生的顺序，以便能够推断结果的完整性
- 有界流
  - 有定义流的开始，也有定义流的结束，有界流可以在摄取所有数据后再进行计算
  - 有界流所有数据可以被排序，所以并不需要有序摄取。有界流处理通常被称为批处理

#### 1.3 基本架构

- Flink 是基于 Master-Slave 风格的架构
  ![image](https://github.com/user-attachments/assets/5e7c04b4-b57b-474c-b527-6d83ccdcd986)
- Flink 集群启动时，会启动一个 JobManager 进程和至少一个 TaskManager 进程
- JobManager
  - Flink 系统的协调者，它负责接收 Flink Job，调度组成 Job 的多个 Task 的执行
  - 收集 Job 的状态信息，并管理 Flink 集群中从节点 TaskManager
- TaskManager
  - 实际负责执行计算的 Worker，在其上执行 Flink Job 的一组 Task
  - TaskManager 负责管理其所在节点上的资源信息，如内存、磁盘、网络，在启动的时候将资源的状态向 JobManager 汇报
- Client
  - 用户提交一个 Flink 程序时，会首先创建一个 Client，该 Client 首先会对用户提交的 Flink 程序进行预处理，并提交到 Flink 集群
  - Client 会将用户提交的 Flink 程序组装一个 JobGraph， 并且是以 JobGraph 的形式提交的

## 2. Spark

#### 2.1 核心理念

- **主要专注于批处理，将流处理当作是特殊的批处理**
- Spark 最初是作为批处理框架设计的，Spark Streaming 是基于 Spark 核心之上的扩展模块，它将实时的数据流划分成小的批次，这种计算模型被称为微批处理
- 从 Spark2.x 开始，引入了 Structured Streaming，进一步强化了将流处理作为连续的批处理作业来运行的概念，同时提供了更声明式的 API 和更好的事件时间支持

#### 2.2 关键组件

- Spark 生态系统包含五个关键组件
- Spark Core 是一个通用的分布式数据处理引擎
  - 在其上有用于 SQL、流处理、机器学习和图计算的库，所有这些库都可以在应用中一起使用
  - Spark Core 是整个项目的基础，提供分布式任务调度、安排和基本的 I/O 功能
- Spark SQL 是用于处理结构化数据的 Spark 模块
  - 支持访问各种数据源的通用方法。Spark SQL 可让用户使用 SQL 或熟悉的 DataFrame API 在 Spark 程序中查询结构化数据
  - Spark SQL 支持 HiveQL 语法，并允许访问现有的 Apache Hive 仓库。服务器模式通过 Java 数据库连接或开放数据库连接提供标准连接
- Spark Streaming 可轻松构建可扩缩、具有容错性的流式解决方案
  - 它将集成了 Spark 语言的 API 引入流处理中，因此您可以像编写批量作业一样编写流式作业
  - Spark Streaming 支持 Java、Scala 和 Python，并且具有开箱即用、有状态的 “正好一次” 语义
- MLlib 是 Spark 可扩容的机器学习库
  - 它所提供的工具可以简化实际的机器学习并为其扩容
  - MLlib 包含许多常见的学习算法，例如分类、回归、推荐和聚类
  - 它还包含工作流和其他实用程序，包括特征转换、机器学习流水线构造、模型评估、分布式线性代数和统计信息
- GraphX 是用于图和图并行计算的 Spark API
  - 它非常灵活，可以无缝处理图和集；统一提取、转换、加载；进行探索性分析；在一个系统中迭代图计算
  - 除了灵活性较高的 API 外，GraphX 还提供了多种图算法。它在性能上比肩最快的图系统，同时保留了 Spark 的灵活性、容错性和易用性
