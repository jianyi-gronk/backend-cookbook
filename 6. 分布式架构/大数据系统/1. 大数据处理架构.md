## 1. 系统类型

- 大数据系统的三种主要架构包括，服务系统，批处理系统，流处理系统

#### 1.1 概念介绍

- 服务系统（ 在线系统 ）
  - 该类型的系统会等待客户端发来的请求或指令，当收到一个请求时，服务会试图尽快的处理它，然后将返回应答
  - 响应时间通常是衡量一个服务性能的最主要指标，且可用性通常很重要
- 批处理系统（ 离线系统 ）
  - 一个批处理系统通常会接受大量数据作为输入，然后一次性做处理，然后在这批数据上跑任务，进而产生一些数据作为输出
  - 任务通常会运行一段时间，从数分钟到数天不等，因此一般来说没有用户会死等任务结束。批处理任务通常会周期性的执行，例如 每天一次
  - 吞吐量（ 处理单位数据量所耗费的时间 ）通常是衡量批处理任务最主要指标
- 流处理系统（ 近实时系统 ）
  - 流处理介于在线处理和离线处理之间，因此也被称为近实时，或者准在线处理
  - “流式” 意味着数据以连续的流的形式被处理，而不需要等待数据积累
  - 和批处理系统一样，流处理系统接受输入，产生一些输出（ 而不是对请求做出响应，因此更像批处理而非服务 ）
  - 一个流式任务通常会在事件产生后就立即对其进行处理，与之相对，一个批处理任务通常会攒够一定尺寸的输入数据才会进行处理。这种区别让流式处理系统比同样功能的批处理系统具有更低的延迟

#### 1.2 静态数据

- 很多企业为了支持决策分析而构建的数据仓库系统，其中存放的大量历史数据就是静态数据。技术人员可以利用数据挖掘和 OLAP（ On-Line Analytical Processing ）分析工具从静态数据中找到对企业有价值的信息
- 静态数据的一般处理
  ![image](https://github.com/user-attachments/assets/17138b90-d5a8-45c5-bef5-82e69a9bd33e)

#### 1.3 流数据

- 流数据，即数据以大量、快速、时变的流形式持续到达，比如 PM2.5 检测、电子商务网站用户点击流
- 流数据具有如下特征：
  - 数据快速持续到达，潜在大小也许是无穷无尽的
  - 数据来源众多，格式复杂
  - 数据量大，但是不十分关注存储，一旦经过处理，要么被丢弃，要么被归档存储
  - 注重数据的整体价值，不过分关注个别数据
  - 数据顺序颠倒，或者不完整，系统无法控制将要处理的新到达的数据元素的顺序

#### 1.4 分析架构

- 服务系统
  - 不论是 web 浏览器请求一个页面，还是服务调用一个远程 API 等，都是常见的服务系统，因此不多介绍
- 批处理系统
  - 批处理架构是最常见的大数据架构之一
  - 优点：
    - 高准确性：批处理分析可以确保数据处理的准确性，因为数据处理是一次性的
  - 缺点：
    - 低吞吐量：批处理分析的吞吐量较低，因为数据处理是一次性的
    - 高延迟：批处理分析的延迟较高，因为数据处理是一次性的
  - 应用场景：
    - 数据挖掘：例如客户行为分析、市场营销分析等
    - 数据清洗：例如数据去噪、数据标准化等
    - 数据汇总：例如财务报表生成、销售数据汇总等
    - 大量计算：例如机器学习大量计算场景等
    - 日志分析：例如每日定时分析线上日志等
- 流处理
  - 流处理适合于需要实时或近实时响应的场景，如实时监控、实时分析、在线推荐系统、实时欺诈检测等
  - 优点：
    - 高吞吐量：流式计算可以处理大量数据，并在短时间内完成数据处理任务
    - 低延迟：流式计算可以实时地对数据进行处理，从而满足实时应用场景的需求
    - 弹性伸缩：流式计算可以根据数据量和处理需求动态地调整计算资源
  - 缺点：
    - 处理不完整：由于数据恒流进入，流式计算可能无法完全处理所有的数据
    - 处理不准确：由于数据处理的实时性要求，流式计算可能会导致数据处理不准确
  - 应用场景：
    - 实时监控：例如网络流量监控、服务器性能监控等
    - 实时推荐：例如在线购物平台的实时推荐、推荐系统的更新等
    - 实时语言翻译：例如实时语音翻译、实时文本翻译等

## 2. 批处理

- 典型的批处理框架就是 Apache Hadoop
- Hadoop 是首个在开源社区获得极大关注的大数据处理框架，其原生的 MapReduce 引擎，主要采取的 “分而治之” 的分布式计算模式
- MapReduce 是一个相当底层的编程模型，但是它在基于廉价硬件上实现大规模的数据处理上迈出了一大步。它将一个分布式计算过程拆解成两个阶段：
  - Map 阶段，由多个可并行执行的 Map Task 构成，主要功能是将待处理数据集按照数据量大小切分成等大的数据分片，每个分片交由一个任务处理
  - Reduce 阶段，由多个可并行执行的 Reduce Task 构成，主要功能是，对前一阶段中各任务产生的结果进行规约，得到最终结果
- 不过虽然 Hadoop 在基础架构上仍然占据重要位置，但是 MapReduce 引擎，作为 Hadoop 原生计算引擎，却受到诟病：比如 编程模型抽象程度较低，仅支持 Map 和 Reduce 两种操作；Map 的中间结果需要写入磁盘，多个 MR 之间需要使用 HDFS 交换数据，不适合迭代计算（ 机器学习、图计算 ）等

## 3. 流处理

- 流处理模式的代表框架 Apache Storm
- Storm 是一种侧重于低延迟的流处理框架，以近实时方式处理源源不断的流数据
- Storm 设计用于在容错和水平可扩展方法中处理大量数据。作为流数据框架，具有最高的摄取率，并通过 Apache ZooKeeper 管理分布式环境和集群状态
- Storm 的基本思想是使用 spout 拉取 stream 数据，并使用 bolt 进行处理和输出，Storm 数据处理延时可以达到亚秒级

## 4. 混合处理

- 流式计算和批处理可以相互补充，结合使用。例如，**可以将实时数据流通过流式计算进行实时处理，并将历史数据通过批处理分析进行深入分析**
- 混合处理 的典型代表框架是 Apache Spark，它基于 Hadoop MapReduce 计算模型的优化，Spark 通过内存计算模型和执行优化大幅提高了对数据的处理能力，在不同情况下，速度可以达到 MR 的 10-100 倍，甚至更高
- Spark 的流处理能力，则是由 Spark Streaming 模块提供的。Spark 引入微批次（Micro-Batch）的概念，即把一小段时间内的接入数据作为一个微批次来处理。但是与 Storm 等原生的流处理系统相比，Spark Streaming 的延时会相对高一些
- Apache Flink 同样支持流处理和批处理，FLink 的设计思想，是“有状态的流计算”，将逐项输入的数据作为真实的流处理，将批处理任务当作一种有界的流来处理
- 在目前的流数据处理框架领域，Flink 可谓独树一帜。虽然 Spark 同样也提供了批处理和流处理的能力，但 Spark 流处理的微批次架构使其响应时间略长。Flink 流处理优先的方式实现了低延迟、高吞吐和真正逐条处理，这也是这几年 Flink 越来越受到重视的原因所在
