## 1. 概念设计（ E-R 图 ）

- E-R 模型是一种使用广泛的数据建模工具，采用 实体集，联系集 和 属性 3 个基本概念分别描述 事物，联系 和 特征
- 实体与实体集
  - 实体：是客观世界中可以区分于其他事物的 “事物” 或 “对象”，其具有两个特征
    - 独立存在：一个实体的存在不依赖于其他实体，例如一个学生的存在不依赖于其他学生实体是否存在
    - 可区别于其他实体：每个实体有一组性质，其中一部分性质的取值可以唯一标识每个实体，例如学号可以唯一标识学生
  - 实体集：是指具有相同性质的实体的集合
    - 实体集是可以相交的，比如某个教师实体，可能即属于教师实体集，也属于人员实体集
- 属性
  - 实体是通过一组属性来描述的，属性是实体集中每个实体都具有的特征描述
  - 一个属性所允许的取值范围或集合称为该属性的域
  - 属性可以分为 简单属性 和 复合属性
    - 简单属性是指不能再分为更小部分的属性，而复合属性是指可以进一步划分为更小部分的属性
    - 例如：家庭住址 属性可以拆分为 省份，城市，街道
  - 属性可以分为 单值属性 和 多值属性
    - 如果某属性对一个特定实体任何时候都只能有单独一个值，则称该属性为单值属性，否则为多值属性
    - 例如：某个学生可能哟 0 个，1 个或者多个电话号码
  - 属性可以分为 派生属性 和 非派生属性
    - 如果某属性的值可以从其他相关属性或实体（ 集 ）派生出来，则该属性为派生属性，否则为非派生属性
    - 例如：学生实体集的年龄可以通过当前日期和出生日期的值计算得到
- 联系与联系集
  - 联系：是指多个实体间的相互关联，例如 x 学生选择了某个课程，可以设计成一个选课联系集，该联系集中，既有学生实体集中的学号属性，也有课程实体集中的课程号属性，当然也可以有自身的描述属性，比如成绩属性
  - 多联系：是指各实体之间可以有多种不同的联系，比如 教师实体集 和 学生实体集 之间可能同时存在 指导联系集 和 授课指导集
  - 实体角色：是指实体在联系中的作用，由于参与一个联系的实体集通常是不同的，所以一般角色是隐含的，不用声明。但是当联系集的实体来自于相同实体集时，则需要声明角色，例如 先修要求联系表中，存在两个课程实体集的实体（ course1，course2 ）
  - 度：联系集的度指参与联系集的实体集数目
- 映射约束
  - 实体集 A 中的一个实体通过某联系集 R 能与实体集 B 中的实体相联系的数目，称为映射基数，在二元练习中，共有三种映射基数，1:1（ 一对一，比如发票对应销货单 ），1:m（ 一对多 或 多对一，比如学生对应班级 ），m:n（ 多对多，比如学生对应课程 ）
  - 一对一联系集的属性可以放在任一边的实体集上（ 压根可以不建表 ）
  - 一对多联系集的属性可以放在联系集上，也可以放在多的那边的实体集上
  - 多对多联系集的属性需要放在联系集上
- 依赖约束：是指联系中一种实体的存在依赖于该联系集中联系或其他实体集中的实体的存在
  - 如果实体依赖于该联系集中的联系，则为依赖实体集
  - 如果实体依赖于其他实体集中的实体，则为弱实体集
- 依赖实体集，比如存在实体集 A 代表商品，存在实体集 B 代表销货单，存在联系集 C 代表商品销售，C 联系 A 和 B，并且 B 依赖于 C，所以 B 是依赖实体集
- 弱 / 强 实体集
  - 如果其属性不足以形成主码，它们必须依赖于其他实体集的存在而存在，则称这样的实体集为弱实体集，反之，如果其属性可以形成主码的实体集，则称为强实体集
  - 弱实体集必须与一个实体集相关联才有意义，这个被依赖的实体集称为标识实体集，而那个弱实体集称为标识联系集
  - 一个弱实体集来表示弱实体的属性集称为该弱实体集的部分码，弱实体集中的实体由其标识实体集中的主码与其部分码共同标识
  - 弱实体集必须满足限制
    - 一个标识实体可以与多个弱实体联系，但是一个弱实体只能与一个标识实体联系
    - 弱实体在标识联系集中是全部参与
- 联系实体集
  - 如果需要表示联系间的联系，两个菱形之间不能直接画直线连接。则需要进行聚合，即将联系集及其相关联的实体集抽象为一个联系实体集，通过在联系集的菱形外侧画一个矩形，来代表联系实体集
  - 比如将三元联系转换成二元联系的方法一般为，通过聚合，将二元联系集建模成一个联系实体集，然后再和原来联系的实体集之间建立二元联系
- 在 E-R 图中
  - 实体集用矩形表示
  - 属性用椭圆表示
  - 多值属性用双椭圆表示
  - 派生属性用虚线椭圆表示
  - 属性与实体之间用连线表示
  - 加下划线的属性为实体集的主码
  - 用菱形表示联系（ 集 ）
  - 如果是一对一映射，箭头为双箭头；如果是一对多映射，箭头为单箭头，由一指向多；如果是多对多映射，则没有箭头，为直线
  - 依赖实体集的背景为填充颜色，并且被依赖的联系集的背景也为填充颜色
  - 用双矩形标识弱实体集，双菱形表示标识联系集，加虚下划线的属性为弱实体的部分码

## 2. 逻辑设计（ 关系模型 ）

## 3. 模式求精（ 关系数据理论 ）
