## 1. 基础介绍

- 在 TCP/IP 网络通信时，为了保证能正常通信，每个设备都需要配置正确的 IP 地址，否则无法实现正常的通信

## 2. IP 数量

- IP 地址（ IPv4 地址 ）地址由 32 位二进制来表示，通常采用了点分十进制的标记方式，也就是将 32 位 IP 地址以每 8 位为组，共分为 4 组，每组以 ”.“ 隔开，再将每组转换成十进制
  <img src="https://i-blog.csdnimg.cn/blog_migrate/c500955880f399b09f59577ee9139150.png" width="500">
- 所以 IP 地址的最大数量为 2 ^ 32，即最大允许 43 亿台计算机连接到网络
- 实际上，IP 地址并不是根据主机台数来配置的，而是以网卡，像服务器、路由器等设备都是有 2 个以上的网卡，也就是它们会有 2 个以上的 IP 地址
  <img src="https://i-blog.csdnimg.cn/blog_migrate/38d931bfd43201275612d77feee44afa.png" width="500">
- 因此，让 43 亿台计算机全部连网其实是不可能的，更何况 IP 地址是由 “网络标识” 和 “主机标识” 这两个部分组成的，所以实际能够连接到网络的计算机个数更是少了很多
- 因此出现一种可以更换 IP 地址的技术 NAT，使得可连接计算机数超过 43 亿台

## 3. IP 地址的分类

### 分类地址

- 互联网刚诞生时，IP 地址显得很充裕，于是设计了分类地址，将 IP 地址分类成了 5 种类型，分别是 A 类、B 类、C 类、D 类、E 类
- 黄色部分为分类号，用以区分 IP 地址类别
  <img src="https://i-blog.csdnimg.cn/blog_migrate/10b44b1bac1bbb3e1de319d7dfdfbdbf.png" width="500px">

### A，B，C 类

- 其中对于 A、B、C 类主要分为两个部分，分别是网络号和主机号，这很好理解，好比房子是在某个小区某一栋
- A、B、C 分类对应的地址范围、最大主机个数
  <img src="https://i-blog.csdnimg.cn/blog_migrate/7d101a38a145e0ecf1b66539297ee31d.png" width="400">
- 最大主机个数 = 2 ^ 主机号的位数 - 2，减 2 是因为在 IP 地址中，有两个 IP 是特殊的，分别是主机号全为 1 和 全为 0 地址，在分配过程中，应该去掉这两种情况
  - 主机号全为 1 指定某个网络下的所有主机，用于广播
  - 主机号全为 0 指定某个网络

### 广播地址

- 广播地址用于在同一个链路中相互连接的主机之间发送数据包
- 广播地址可以分为 本地广播 和 直接广播 两种
- 在本网络内广播的叫做本地广播
  - 例如网络地址为 192.168.0.0/24 的情况下，广播地址是 192.168.0.255
  - 因为这个广播地址的 IP 包会被路由器屏蔽，所以不会到达 192.168.0.0/24 以外的其他链路上
- 在不同网络之间的广播叫做直接广播
  - 例如网络地址为 192.168.0.0/24 的主机向 192.168.1.255/24 的目标地址发送 IP 包
  - 收到这个包的路由器，将数据转发给 192.168.1.0/24，使得 192.168.1.1~192.168.1.254 的主机都能收到这个包
  - 由于直接广播有一定的安全问题，所以多数情况下会在路由器上设置为不转发

<img src="https://i-blog.csdnimg.cn/blog_migrate/a4bdc5c7b9ec6d7d014905ae57670678.png" width="500">

### D，E 类

- D 类和 E 类地址是没有主机号的，所以不可用于主机 IP，D 类常被用于多播，E 类是预留的分类，暂时未使用
  <img src="https://i-blog.csdnimg.cn/blog_migrate/a5c2d655d1065793e708d2153851bbed.png">

### 多播地址

- 多播用于将包发送给特定组内的所有主机
- 由于广播无法穿透路由，若想给其他网段发送同样的包，就可以使用可以穿透路由的多播
- 多播使用的 D 类地址，其前四位是 1110 就表示是多播地址，而剩下的 28 位是多播的组编号
- 从 224.0.0.0 ~ 239.255.255.255 都是多播的可用范围，其划分为以下三类：
  - 224.0.0.0 ~ 224.0.0.255 为预留的组播地址，只能在局域网中，路由器是不会进行转发的
  - 224.0.1.0 ~ 238.255.255.255 为用户可用的组播地址，可以用于 Internet 上
  - 239.0.0.0 ~ 239.255.255.255 为本地管理组播地址，可供内部网在内部使用，仅在特定的本地范围内有效

<img src="https://i-blog.csdnimg.cn/blog_migrate/b3c555f0b0a3bcdd6e36cbd42f441e32.png" width="500">

### IP 分类优点

- 分类地址的优点就是简单明了，并且选路（ 基于网络地址 ）简单
- 例如不管是路由器还是主机解析到一个 IP 地址时候，判断其 IP 地址的首位是否为 0，为 0 则为 A 类地址，那么就能很快的找出网络地址和主机地址

### IP 分类缺点

- 同一网络下没有地址层次
  - 比如一个公司里用了 B 类地址，但是可能需要根据生产环境、测试环境、开发环境来划分地址层次
  - 而这种 IP 分类是没有地址层次划分的功能，一个网络下所有地址都是同一个层次，所以这就缺少地址的灵活性
- A、B、C 类不能很好的与现实网络匹配
  - C 类地址能包含的最大主机数量实在太少了，只有 254 个，估计一个网吧都不够用
  - 而 B 类地址能包含的最大主机数量又太多了，6 万多台机器放在一个网络下面，一般的企业基本达不到这个规模，闲着的地址就是浪费
- 这两个缺点，都可以在 CIDR 无分类地址解决

## 4. 无分类地址
